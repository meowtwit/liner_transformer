# 画像行列変換ツール - Matrix Transform Studio

行列ベースで画像に様々な線形変換を適用できるGUIソフトウェアです。

## 特徴

- **リアルタイムプレビュー**: 変換をスライダーで調整しながらリアルタイムで確認
- **多様な変換機能**:
  - スケール変換（X/Y軸方向の拡大縮小）
  - 回転変換（任意の角度で回転）
  - シアー変換（せん断変換）
  - カスタム変換行列の直接入力
- **使いやすいUI**: 洗練されたダークテーマのインターフェース
- **グリッド表示**: 変換を視覚的に理解しやすいグリッド表示機能

## インストール

### 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

または個別にインストール:

```bash
pip install numpy opencv-python Pillow
```

## 使い方

### 1. サンプル画像の作成（オプション）

```bash
python create_sample_image.py
```

これにより `image.png` が作成されます。

### 2. アプリケーションの起動

```bash
python image_transform_gui.py
```

### 3. 基本操作

1. **画像を開く**: 左パネルの「📁 画像を開く」ボタンをクリック
2. **変換を適用**:
   - **スケール変換**: スライダーでX/Y軸の倍率を調整
   - **回転変換**: スライダーまたはプリセットボタンで角度を設定
   - **シアー変換**: スライダーでせん断の度合いを調整
   - **カスタム行列**: テキストエリアに2x3行列を直接入力して「行列を適用」
3. **画像を保存**: 変換後の画像を「💾 画像を保存」で保存
4. **リセット**: 「🔄 すべてリセット」で初期状態に戻す

## 変換の例

### X軸方向に2倍縮小

```
スケールX: 0.5
スケールY: 1.0
```

### 反時計回りに120度回転

```
回転角度: 120
```

### シアー変換（上の辺を下の辺の半分の長さ分ずらす）

```
Y方向シアー: -0.5
```

### カスタム変換行列

2x3の変換行列を直接入力できます:

```
[
  a  b  tx
  c  d  ty
]
```

例（反転と回転を組み合わせ）:
```
[
  -0.707  0.707  300
   0.707  0.707  100
]
```

## 変換行列の数学

すべての変換は3x3の同次変換行列で表現されます:

```
[a  b  tx]   [x]   [ax + by + tx]
[c  d  ty] × [y] = [cx + dy + ty]
[0  0   1]   [1]   [     1      ]
```

- **スケール変換**: `a` と `d` で倍率を制御
- **回転変換**: `a = cos(θ)`, `b = -sin(θ)`, `c = sin(θ)`, `d = cos(θ)`
- **シアー変換**: `b` (X方向) または `c` (Y方向)
- **平行移動**: `tx`, `ty`

複数の変換は行列の乗算で合成されます。

## ショートカット

- グリッド表示の切り替え: チェックボックスをクリック
- プリセット回転: 90°, 120°, 180°, 270° ボタン
- スケールリセット: 「1:1にリセット」ボタン

## トラブルシューティング

### 画像が表示されない

- 対応形式: PNG, JPG, JPEG, BMP, GIF
- ファイルパスに日本語が含まれている場合、問題が発生する可能性があります

### 変換が適用されない

- 「🔄 すべてリセット」ボタンを押してから再試行
- 画像が読み込まれているか確認

## ライセンス

MIT License

## 作者

Created with Claude Code - Matrix Transform Studio
